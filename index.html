<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JSON-RPC 2.0 Modern C++ Library</title>
<link rel="icon" href="favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="favicon-16x16.png" sizes="16x16" type="image/png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JSON-RPC 2.0
   </div>
   <div id="projectbrief">JSON-RPC 2.0 Modern C++ Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">JSON-RPC 2.0 Modern C++ Library </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://github.com/hankhsu1996/json-rpc-2.0/actions/workflows/ci.yml"><img src="https://github.com/hankhsu1996/json-rpc-2.0/actions/workflows/ci.yml/badge.svg?event=push" alt="CI" style="pointer-events: none;" class="inline"/></a></p>
<p>Welcome to the <b>JSON-RPC 2.0 Modern C++ Library</b>! This library provides a lightweight, modern C++ implementation of <a href="https://www.jsonrpc.org/specification">JSON-RPC 2.0</a> servers and clients. It is designed to be flexible, allowing integration with various transport layers. This library makes it easy to register methods and notifications, binding them to client logic efficiently.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
✨ Features</h1>
<ul>
<li><b>Fully Compliant with JSON-RPC 2.0</b>: Supports method calls, notifications, comprehensive error handling, and batch requests.</li>
<li><b>Modern and Lightweight</b>: Leverages C++20 features with minimal dependencies, focusing solely on the JSON-RPC protocol.</li>
<li><b>Transport-Agnostic</b>: Abstract transport layer allows use of provided implementations or custom ones.</li>
<li><b>Simple JSON Integration</b>: Uses <a href="https://github.com/nlohmann/json">nlohmann/json</a> for easy JSON object interaction, requiring no learning curve.</li>
<li><b>Flexible Handler Registration</b>: Register handlers using <code>std::function</code>, supporting lambdas, function pointers, and other callable objects.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
🚀 Getting Started</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Prerequisites</h2>
<ul>
<li><b>Compiler</b>: Any compiler with C++20 support.</li>
<li><b>Bazel</b>: Version 7.0+ (for Bzlmod support).</li>
<li><b>CMake</b>: Version 3.19+ (for CMake preset support, optional).</li>
<li><b>Conan</b>: Version 2.0+ (optional).</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Using Bazel</h2>
<p>To include this library in your project with Bazel, ensure you are using Bazel 7.0 or later, as Bzlmod is enabled by default. Add the following to your <code>MODULE.bazel</code> file:</p>
<div class="fragment"><div class="line">bazel_dep(name = &quot;jsonrpc&quot;, version = &quot;1.0.0&quot;)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Optional: Using CMake FetchContent</h2>
<p>If you prefer using CMake, add the library to your project with the following in your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  jsonrpc</div>
<div class="line">  GIT_REPOSITORY https://github.com/hankhsu1996/json-rpc-2.0.git</div>
<div class="line">  GIT_TAG main</div>
<div class="line">)</div>
<div class="line">FetchContent_MakeAvailable(jsonrpc)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Optional: Using Conan 2</h2>
<p>For projects using Conan, create a <code>conanfile.txt</code> in your project directory with the following content:</p>
<div class="fragment"><div class="line">[requires]</div>
<div class="line">json-rpc-2.0/1.0.0</div>
<div class="line"> </div>
<div class="line">[generators]</div>
<div class="line">CMakeDeps</div>
<div class="line">CMakeToolchain</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
📖 Usage and Examples</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
Creating a JSON-RPC Server</h2>
<p>Here’s how to create a simple JSON-RPC server:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_class" href="classjsonrpc_1_1server_1_1Server.html">jsonrpc::server::Server</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_class" href="classjsonrpc_1_1transport_1_1StdioTransport.html">jsonrpc::transport::StdioTransport</a>;</div>
<div class="line"><span class="keyword">using </span>Json = nlohmann::json;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a server with an stdio transport</span></div>
<div class="line">Server server(std::make_unique&lt;StdioTransport&gt;());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register a method named &quot;add&quot; that adds two numbers</span></div>
<div class="line">server.RegisterMethodCall(<span class="stringliteral">&quot;add&quot;</span>, [](<span class="keyword">const</span> std::optional&lt;Json&gt; &amp;params) {</div>
<div class="line">  <span class="keywordtype">int</span> result = params.value()[<span class="stringliteral">&quot;a&quot;</span>] + params.value()[<span class="stringliteral">&quot;b&quot;</span>];</div>
<div class="line">  <span class="keywordflow">return</span> Json{{<span class="stringliteral">&quot;result&quot;</span>, result}};</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register a notification named &quot;stop&quot; to stop the server</span></div>
<div class="line">server.RegisterNotification(<span class="stringliteral">&quot;stop&quot;</span>, [&amp;server](<span class="keyword">const</span> std::optional&lt;Json&gt; &amp;) {</div>
<div class="line">  server.Stop();</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Start the server</span></div>
<div class="line">server.Start();</div>
<div class="ttc" id="aclassjsonrpc_1_1server_1_1Server_html"><div class="ttname"><a href="classjsonrpc_1_1server_1_1Server.html">jsonrpc::server::Server</a></div><div class="ttdoc">A JSON-RPC server for handling requests and notifications.</div><div class="ttdef"><b>Definition</b> <a href="server_8hpp_source.html#l00019">server.hpp:19</a></div></div>
<div class="ttc" id="aclassjsonrpc_1_1transport_1_1StdioTransport_html"><div class="ttname"><a href="classjsonrpc_1_1transport_1_1StdioTransport.html">jsonrpc::transport::StdioTransport</a></div><div class="ttdoc">Transport layer using standard I/O for JSON-RPC communication.</div><div class="ttdef"><b>Definition</b> <a href="stdio__transport_8hpp_source.html#l00012">stdio_transport.hpp:12</a></div></div>
</div><!-- fragment --><p>To register a method, you need to provide a function that takes optional <code>Json</code> parameters and returns a <code>Json</code> object containing either a <code>result</code> or <code>error</code> field. The <code>error</code> field must follow the JSON-RPC spec, including code and message. For simplicity, this library does not provide a more structured way to create error responses.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Creating a JSON-RPC Client</h2>
<p>Here’s how to create a JSON-RPC client:</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_class" href="classjsonrpc_1_1client_1_1Client.html">jsonrpc::client::Client</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_class" href="classjsonrpc_1_1transport_1_1StdioTransport.html">jsonrpc::transport::StdioTransport</a>;</div>
<div class="line"><span class="keyword">using </span>Json = nlohmann::json;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a client with a standard I/O transport</span></div>
<div class="line">Client client(std::make_unique&lt;StdioTransport&gt;());</div>
<div class="line">client.Start();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Perform addition</span></div>
<div class="line"><span class="keyword">auto</span> response = client.SendMethodCall(<span class="stringliteral">&quot;add&quot;</span>, Json({{<span class="stringliteral">&quot;a&quot;</span>, 10}, {<span class="stringliteral">&quot;b&quot;</span>, 5}}));</div>
<div class="line">spdlog::info(<span class="stringliteral">&quot;Add result: {}&quot;</span>, response.dump());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send stop notification</span></div>
<div class="line">client.SendNotification(<span class="stringliteral">&quot;stop&quot;</span>);</div>
<div class="ttc" id="aclassjsonrpc_1_1client_1_1Client_html"><div class="ttname"><a href="classjsonrpc_1_1client_1_1Client.html">jsonrpc::client::Client</a></div><div class="ttdoc">A JSON-RPC client for sending requests and receiving responses.</div><div class="ttdef"><b>Definition</b> <a href="client_8hpp_source.html#l00025">client.hpp:25</a></div></div>
</div><!-- fragment --><p>These examples demonstrate the basic usage of setting up a JSON-RPC server and client. For more examples and detailed usage, please refer to the <a href="./examples/">examples folder</a>.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
🛠️ Developer Guide</h1>
<p>Follow these steps to build, test, and set up your development environment. Bazel is the preferred method.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Option 1: Using Bazel (Preferred)</h2>
<p><b>Step 1: Build the Project</b></p>
<div class="fragment"><div class="line">bazel build //...</div>
</div><!-- fragment --><p><b>Step 2: Run Tests</b></p>
<div class="fragment"><div class="line">bazel test //...</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Option 2: Using CMake and Conan</h2>
<p><b>Step 1: Install Dependencies</b></p>
<div class="fragment"><div class="line">conan profile detect --force</div>
<div class="line">conan install . --build=missing</div>
<div class="line">conan install . -s build_type=Debug --build=missing</div>
</div><!-- fragment --><p><b>Step 2: Configure and Build</b></p>
<div class="fragment"><div class="line">cmake --preset release</div>
<div class="line">cmake --build --preset release</div>
</div><!-- fragment --><p><b>Step 3: Run Tests</b></p>
<div class="fragment"><div class="line">ctest --preset release</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Optional: Debug Configuration</h2>
<p>For Debug configuration:</p>
<div class="fragment"><div class="line">cmake --preset debug</div>
<div class="line">cmake --build --preset debug</div>
<div class="line">ctest --preset debug</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
Compilation Database</h2>
<p>Generate the <code>compile_commands.json</code> file for tools like <code>clang-tidy</code> and <code>clangd</code>:</p>
<ul>
<li><b>Bazel</b>: Run <code>bazel run @hedron_compile_commands//:refresh_all</code>.</li>
<li><b>CMake</b>: Simply build the project. The database will be generated automatically.</li>
</ul>
<p>In both cases, the <code>compile_commands.json</code> file will be placed in the root directory.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
🤝 Contributing</h1>
<p>We welcome contributions! If you have suggestions or find any issues, feel free to open an issue or pull request.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
📄 License</h1>
<p>This project is licensed under the MIT License. See the <a href="./LICENSE">LICENSE</a> file for more details. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
